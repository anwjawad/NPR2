/* styles.css — Modernized UI with 3 themes + Patients grid cards
   --------------------------------------------------------------
   Themes:
     - data-theme="midnight" (افتراضي، داكن فاخر)
     - data-theme="ocean"    (داكن تركوازي)
     - data-theme="ivory"    (فاتح أنيق)
   Notes:
     - لا تغييرات على أسماء الـIDs المستخدمة بالتطبيق.
     - #patients-list صار Grid Responsive لكروت المرضى.
*/

/* ====== Base Reset ====== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  font-weight: 500;
  line-height: 1.5;
  background: var(--bg);
  color: var(--text);
  transition: background-color .25s ease, color .25s ease;
}

/* ====== Theme Tokens ====== */
:root {
  --radius: 18px;
  --radius-lg: 20px;
  --elev: 0 8px 24px rgba(0,0,0,.18);
  --elev-sm: 0 4px 14px rgba(0,0,0,.12);
  --ring: 0 0 0 3px color-mix(in oklab, var(--accent) 30%, transparent);
  --ease: cubic-bezier(.2,.8,.2,1);
}

/* Midnight (default) */
:root[data-theme="midnight"] {
  --bg: linear-gradient(180deg, #0d1122 0%, #0b1020 100%);
  --surface: #0f162c;
  --surface-2: #131b33;
  --panel: #0e1428;
  --border: rgba(255,255,255,.08);
  --text: #e7eaff;
  --muted: #95a0c7;
  --accent: #7c9cff;
  --accent-2: #9be4ff;
  --good: #45e0a8;
  --warn: #ffcd6b;
  --bad:  #ff6b8a;
  --chip-abn-bg: rgba(255,107,138,.12);
  --chip-abn-fg: #ff8aa1;
  --chip-sym-bg: rgba(124,156,255,.12);
  --chip-sym-fg: #a9baff;
}

/* Ocean */
:root[data-theme="ocean"] {
  --bg: radial-gradient(1200px 600px at 15% -10%, #0d2230 0%, transparent 60%),
        radial-gradient(1000px 800px at 100% 0%, #06252b 0%, transparent 55%),
        #07171f;
  --surface: #0a2030;
  --surface-2: #0e2836;
  --panel: #0a1d29;
  --border: rgba(255,255,255,.09);
  --text: #e5fbff;
  --muted: #9fd5de;
  --accent: #15b9c7;
  --accent-2: #49e2f1;
  --good: #34e3b2;
  --warn: #ffd27f;
  --bad:  #ff7d9a;
  --chip-abn-bg: rgba(255,125,154,.12);
  --chip-abn-fg: #ff98ae;
  --chip-sym-bg: rgba(21,185,199,.12);
  --chip-sym-fg: #6fe4ee;
}

/* Ivory (Light) */
:root[data-theme="ivory"] {
  --bg: #f6f8fb;
  --surface: #ffffff;
  --surface-2: #ffffff;
  --panel: #fff;
  --border: rgba(15,23,42,.12);
  --text: #0f172a;
  --muted: #5b647a;
  --accent: #4f7cff;
  --accent-2: #4cd1a1;
  --good: #12b981;
  --warn: #d97706;
  --bad:  #e11d48;
  --chip-abn-bg: rgba(225,29,72,.08);
  --chip-abn-fg: #b91c1c;
  --chip-sym-bg: rgba(79,124,255,.10);
  --chip-sym-fg: #264edb;
}

/* ====== Layout ====== */
#app { display: grid; grid-template-columns: 280px 1fr; gap: 18px; padding: 18px; }
.aside {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--elev-sm);
}
.main {
  min-height: calc(100vh - 36px);
}

/* Topbar */
.topbar {
  display: flex; align-items: center; gap: 12px; margin-bottom: 14px;
}
.search {
  flex: 1; display: flex; align-items: center; gap: 10px;
  background: var(--surface-2); border: 1px solid var(--border); border-radius: 999px;
  padding: 10px 14px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.search input {
  width: 100%; border: 0; outline: none; background: transparent; color: var(--text);
  font: inherit;
}

/* Pills & buttons */
.pill, .btn {
  background: var(--surface-2);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 10px 14px;
  cursor: pointer;
  transition: transform .15s var(--ease), background .2s var(--ease), border-color .2s var(--ease), box-shadow .2s var(--ease);
}
.pill:hover, .btn:hover { transform: translateY(-1px); }
.btn.primary { background: color-mix(in oklab, var(--accent) 30%, var(--surface-2)); border-color: color-mix(in oklab, var(--accent) 55%, var(--border)); }
.btn.danger  { background: color-mix(in oklab, var(--bad) 22%, var(--surface-2)); border-color: color-mix(in oklab, var(--bad) 50%, var(--border)); }
.btn:focus-visible { outline: none; box-shadow: var(--ring); }

/* Tabs */
.tabs { display: inline-flex; gap: 6px; background: var(--surface-2); border: 1px solid var(--border); border-radius: 999px; padding: 6px; }
.tab {
  padding: 8px 14px; border-radius: 999px; cursor: pointer; color: var(--muted); user-select: none;
  transition: background .2s var(--ease), color .2s var(--ease);
}
.tab.active { background: var(--accent); color: white; }

/* ====== Patients Grid ====== */
.panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  box-shadow: var(--elev);
}
#patients-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 18px;
  align-content: start;
  min-height: 140px;
}
.patient-card {
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 8px;
  padding: 14px;
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--elev-sm);
  transition: transform .18s var(--ease), box-shadow .18s var(--ease), background .2s var(--ease), border-color .2s var(--ease);
}
.patient-card:hover { transform: translateY(-3px); box-shadow: 0 10px 30px color-mix(in oklab, var(--accent) 12%, transparent); }
.patient-card .row-header {
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
}
.row-title.linkish {
  font-weight: 800; letter-spacing: .2px; line-height: 1.2; color: var(--text);
  text-decoration: none; cursor: pointer;
  transition: color .2s var(--ease), text-shadow .2s var(--ease);
}
.row-title.linkish:hover { color: var(--accent-2); text-shadow: 0 0 0 transparent, 0 6px 30px color-mix(in oklab, var(--accent) 40%, transparent); }
.status {
  padding: 4px 10px; border-radius: 999px; font-size: .78rem; font-weight: 800;
  border: 1px solid var(--border); white-space: nowrap;
}
.status.open { background: rgba(255,255,255,.06); color: var(--muted); }
.status.done { background: color-mix(in oklab, var(--good) 15%, transparent); color: #0bffcc; border-color: color-mix(in oklab, var(--good) 45%, var(--border)); }

.row-sub {
  font-size: .9rem; color: var(--muted); letter-spacing: .2px;
}
.row-tags {
  display: flex; flex-wrap: wrap; gap: 8px;
}
.row-tag {
  background: rgba(255,255,255,.06);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: .78rem;
  font-weight: 700;
}
.row-chip {
  border-radius: 999px;
  padding: 4px 10px;
  font-size: .78rem;
  font-weight: 800;
  border: 1px solid var(--border);
}
.row-chip.abn { background: var(--chip-abn-bg); color: var(--chip-abn-fg); border-color: color-mix(in oklab, var(--bad) 35%, var(--border)); }
.row-chip.sym { background: var(--chip-sym-bg); color: var(--chip-sym-fg); border-color: color-mix(in oklab, var(--accent) 35%, var(--border)); }

.muted { color: var(--muted); }
.small { font-size: .86rem; }
.mono  { font-family: ui-monospace, "SFMono-Regular", Menlo, Consolas, "Liberation Mono", monospace; }

/* Empty state */
.empty {
  display: grid; place-items: center; height: 120px;
  color: var(--muted); border: 1px dashed var(--border); border-radius: var(--radius);
}

/* ====== Aside buttons ====== */
.aside h4 { margin: 10px 8px; color: var(--muted); font-weight: 700; }
.aside .btn { width: 100%; display: block; text-align: left; margin: 6px 0; }
.aside .btn.primary { color: #fff; }

/* ====== Modals & overlays ====== */
.modal {
  position: fixed; inset: 0; background: rgba(0,0,0,.45);
  display: grid; place-items: center; z-index: 50; backdrop-filter: blur(6px);
  opacity: 1; transform: none; transition: opacity .2s var(--ease);
}
.modal.hidden { opacity: 0; pointer-events: none; }
.modal .box {
  width: min(960px, 92vw); max-height: 86vh; overflow: auto;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 22px;
  box-shadow: var(--elev);
  padding: 16px;
}

/* Settings specific */
.settings-grid {
  display: grid; gap: 12px; grid-template-columns: 1fr;
}
.field { display: grid; gap: 6px; }
.field .label { font-size: .9rem; color: var(--muted); }
.field input, .field textarea, .field select {
  width: 100%; background: var(--surface-2); color: var(--text);
  border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px;
  outline: none; transition: box-shadow .18s var(--ease), border-color .18s var(--ease), background .2s var(--ease);
}
.field input:focus, .field textarea:focus, .field select:focus { box-shadow: var(--ring); border-color: color-mix(in oklab, var(--accent) 50%, var(--border)); }

/* Theme swatches */
.theme-swatches { display: flex; gap: 10px; }
.theme-swatch {
  width: 64px; height: 44px; border-radius: 10px;
  border: 2px solid var(--border); box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
  cursor: pointer; position: relative; overflow: hidden;
  transition: transform .15s var(--ease), border-color .15s var(--ease);
}
.theme-swatch:hover { transform: translateY(-2px); }
.theme-swatch input { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
.theme-swatch .name {
  position: absolute; bottom: 6px; left: 6px; right: 6px; font-size: .72rem; font-weight: 800; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,.6);
}
.swatch-midnight { background: linear-gradient(135deg, #0d1122, #131b33); }
.swatch-ocean    { background: linear-gradient(135deg, #0a2030, #15b9c7); }
.swatch-ivory    { background: linear-gradient(135deg, #ffffff, #eef3ff); border-color: rgba(15,23,42,.18); }
.theme-swatch input:checked + .name { outline: 2px solid #fff; outline-offset: -2px; }

/* Toasts */
.toast {
  position: fixed; left: 50%; bottom: 18px; transform: translateX(-50%) translateY(0);
  background: var(--surface-2); color: var(--text); border: 1px solid var(--border);
  padding: 10px 14px; border-radius: 12px; box-shadow: var(--elev-sm); z-index: 80;
  opacity: 0; pointer-events: none; transition: opacity .18s var(--ease), transform .18s var(--ease);
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(-6px); }
.toast.success { border-color: color-mix(in oklab, var(--good) 40%, var(--border)); }
.toast.warn    { border-color: color-mix(in oklab, var(--warn) 40%, var(--border)); }
.toast.danger  { border-color: color-mix(in oklab, var(--bad)  40%, var(--border)); }
